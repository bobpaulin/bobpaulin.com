title=Programmatically Irrational - Build vs Buy
date=2018-03-25
type=post
tags=blog, asciidoc
imagesdir=assets/images
status=draft
~~~~~~
= Programmatically Irrational - Build vs Buy
Bob Paulin
2018-03-25

We developers love to write code.  There is no better feeling in the world than to push some new (working!) code to production and see it run to benefit other people.  We can do it on the cheap by pulling in the latest open source libraries and build tools.  However often before we start coding our bosses, whom have just come back from a trade show, are asking us why they can just buy the hot new product all their friends have been talking about.  According to the whitepaper and the online product demo it does everything you're looking to build plus more!  So which direction do we choose?  As in most engineering decisions: "It depends...." But before we evaluate it's important to understand the bias at work on both sides: the hidden costs of free software and hidden costs of paid software.

The Hidden Cost of Free Software

Lets face it Open Source has won.  The world is filled with high quality open source libraries for developers to use without have to pay license fees.  I love open source.  I contribute open source projects at the Apache Software Foundation (ASF) and the way I do business would not be possible without it.  One of the first things that drew me to open source was the fact that it was FREE!  There was no reason for me to ask my manager for budget, I just had to make sure that it had a business friendly license (Like Apache 2.0) and I was off.  Free is a rather amazing price point that defies economics.  One of the studies from the book "Predictably Irrational" by Dan Ariely shows how dropping a products prices relative to another's can make incremental changes in consumer preferences....that is until one of them becomes free.  Moving the price to free can cause a massive shift in the free product's favor.  But this all makes sense right?  Free means I can have as much as I want.  And that's where our free bias starts to cloud our judgment fellow developers.  The problem is even free has a cost.   

The most obvious cost is our time.  While we're building something new is there something else we could be doing with our time to add value?  This is called opportunity cost and often goes unnoticed until the end of the year when we don't meet our goals.  The cost of a developer's time is generally the largest expense on a project.  Compare the annual cost of a developer to company compared to a large server:

image::DevCost.PNG[]

   We also tend to overvalue the things we've spent our own time to build.  This has been dubbed the IKEA Effect [1] and is discussed in another book by Dan Ariely "The Upside of Irrationality".  This can cause us to try to hold on to our own pet projects when better options are available (and cheaper) in the market. The cost of owning the your product's dependency tree is another often under-estimated costs on a project.  That pang of fear you experience whenever you change a dependency version or switch to a new runtime comes from the fact that you realize that simple change could be bringing in hundreds of lines of new code.  This means taking some time to match up library versions to make sure the entire application is compatible.  Platforms like JavaEE (now JakartaEE), Spring Boot and Apache Karaf try to lower some of these costs by providing tested library combinations that just work.  But it still make take some time to upgrade these platforms to newer versions.  

Open source projects also vary on maturity.  New or immature projects may require a little more work to get started with.  The ASF has a couple different ways to signal maturity.  The first is the Incubator which doesn't always indicate the code is not production worthy but does indicate the project is new to the foundation and it's processes/culture aka The Apache Way[1].  But even a project that has graduated has different levels of maturity[2] that might help determine if it's right for your organization.  Finally there's also the cost of project abandonment.  If the open source community goes away you might be left with security holes and old transitive dependencies making upgrades difficult.  Mitigating this risk requires spelunking projects mailing list or checking github for activity.  Some foundations like the Apache Software Foundation also have formal processes around monitoring project health so a project retiring to the attic is never a surprise.  So even open source has costs and it's important to weigh those costs before deciding to move forward with a project.  Even free as in free beer has a cost, something I'm all too familiar with ;).

The Hidden Cost of Paid Software

Ok so maybe I've given you enough to at least hear your manager out on the product from the trade show.  Hey you might even like the idea that you can just take the cost of the software off a price sheet.  Sure beats trying to estimate hours!  But now that you've decided to pay for software, be it in the cloud subscription or a license, is the only price the sticker price?  Probably not.  One of the most troubling criteria I have seen used to evaluate proprietary software pitch is ease of customization.  Oh you don't like the way this works?  Well you can go in there and write the code to change it.  Developers feel right at home with this.  But did we include the hours required to customize in the original build vs buy decision?  Did we consider the cost of keeping those customizations when the product changes and evolves over time?  If you did not you maybe grossly underestimating the cost of the purchased software.  

In addition to that the more you pay for something the more invested we get in making sure it meets expectations.  This is similar to another of Ariely's experiments where patients got more pain relief from expensive pain medication compared to cheap pain medication (of which both were Vitamin C tablets).  The more we invest in paid software the more effort and customization we tend to put into it to make it work.  This can create a vicious never ending cycle of paying for software then bringing in expensive consultants to make it work.  Then when the expensive consultants screw it up, we bring in more expensive consultants to fix it (I know because I've played that game before).  Expertise can be hard to find as well, this delays implementations for months waiting for folks to roll off projects.  One creative way companies have dealt with this is by open sourcing a community version of the product but keeping the tooling and operational aspects of the product closed.  This way at least any developer can often produce a working POC prior to deciding to pay for the software.  Then when things start to scale up the sales person gets a call.   Scaling can also lead to unpredictable costs based on how you're paying for the software.  Is it by cpu core, machine, per request?  These can create engineering problems that you might not have with open source.  When you're paying per request in the cloud that DDOS attack didn't just cost you sales it increased your operational cost.  

Lastly when we buy a product we have to give up some control.  You want to keep your indeminfication?  Better patch on the product schedule.  Want to be on the latest Java version? Gotta wait for it to be certified.  Need system level logs for debugging?  Send a ticket we'll get to it eventually. When things are running smoothly these risks often go ignored.  In fact when a product or solution fits the problem "As-Is" purchasing can be a great choice as many of these problems I'm calling out do not exists.  However without carefully considering the hidden costs your team's budget may be allocated for the next 5 years.  

I think it's fair to say as a developer we're not paid to code.  We're paid to solve problems that add value to the businesses that support us.  That's what keeps the money flowing to our bank accounts!  So it's important to consider all the costs going into our build and buy decisions whether we're going with open source or with paid solutions.  At the end of the day there's no free lunch!

[1] https://en.wikipedia.org/wiki/IKEA_effect
[2] http://www.apache.org/foundation/how-it-works.html
[3] https://community.apache.org/apache-way/apache-project-maturity-model.html